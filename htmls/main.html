<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../img/favicon.ico" type="image/vnd.microsoft.icon">
    <title>HAL MS PROJECT</title>
    <link rel="stylesheet" href="../css/main.css">
    <script type="text/javascript" src="../js/jquery-2.0.3.min.js"></script>
    <script src="../js/particles.js-master/particles.js"></script>
    <script src="../js/audioManager.min.js"></script>
    <script src="../js/audio.js"></script>
    <script src="../js/numCheck.js"></script>
    <style type="text/css">
    canvas#visualizer {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      z-index: 9999;
    }
    </style>
  </head>
  <body>

    <!-- shooting star -->
    <div id="particles-js"></div>

    <!-- audio sun -->
    <canvas id="visualizer"></canvas>

    <!-- planetarium star's -->
    <div id="particles-star"></div>

    <!-- milky way -->
    <div id="milkyway"></div>

    <script src="../js/set.js"></script>
    <script src="../js/anim.js"></script>
    <script src="../js/star.js"></script>

    <script type="text/javascript">

      function getQuery() {
        if (1 < document.location.search.length) {
          var query = document.location.search.substring(1);
          var parameters = query.split('&');
          var result = new Object();
            for (var i = 0; i < parameters.length; i++) {
              var element = parameters[i].split('=');
              var paramName = decodeURIComponent(element[0]);
              var paramValue = decodeURIComponent(element[1]);
              result[paramName] = decodeURIComponent(paramValue);
            }
          return result;
        }
        return null;
      }

      function someFunc(value) {
        /* 範囲乱数数値sample
          最小 50, 最大 200
          Math.floor( Math.random() * (200 + 1 - 50) ) + 50 ;
        */
        var colorList = [
          ["#ff0000","#ffbb00","#ffbbbb","#ff00bb"], // red
          ["#00ff00","#bbff00","#bbffbb","#00ffbb"], // green
          ["#0000ff","#bb00ff","#00bbff","#bbbbff"]  // blue
        ];

        // value test
        var stars = {
          "value"   : value[0],
          "size"    : value[1],
          "opacity" : value[2],
          "color"   : colorList[value[3]],
        }

        var shootings = {
          "speed"   : 7,
          "size"    : 10,
          "opacity" : 0.5,
          "color"   : colorList[0],
        }

        var milkys = {
          "value"   : Math.floor(Math.random () * 200) + 400,
          "color"   : colorList[2],
          "size"    : Math.floor(Math.random () * 8) + 3,
          "opacity" : 0.5,
          "left"    : Math.floor(Math.random () * 60) + 0,  //(0 ～ 60)
          "rotate"  : Math.floor(Math.random () * 180) + 0, //(0 ～ 180)
        }

        star(stars);
        milky(milkys);
        shooting(shootings);
      }

      // const getData = getQuery();
      // const url = "http://localhost:8080/work/hal-ms-project/json/" + getData["name"] + ".json";

      // sample
      const url = "http://localhost:8080/work/hal-ms-project/json/sample.json";

      $.getJSON(url, function(jsonData) {
        const value = createNumber(jsonData);
        someFunc(value);
      });
    
    </script>
  </body>
</html>